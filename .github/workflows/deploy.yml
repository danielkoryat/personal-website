name: Deploy to Home Server

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy:
    runs-on: self-hosted
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Deploy application
      run: |
        echo "Starting deployment..."
        docker compose down
        docker compose up -d --build
        echo "âœ… Deployment completed successfully!"
    
    - name: Show container status
      run: docker compose ps
    
    - name: Show deployment info
      run: |
        echo "ðŸš€ Website deployed at: http://192.168.0.165:8080"
        echo "ðŸ“… Deployment time: $(date)"
